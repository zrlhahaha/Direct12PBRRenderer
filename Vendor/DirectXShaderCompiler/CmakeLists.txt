set(DXC_LIB_DIR CACHE INTERNAL "${CMAKE_SOURCE_DIR}/Vendor/DirectXShaderCompiler/lib/x64")
set(DXC_DLL_DIR CACHE INTERNAL "${CMAKE_SOURCE_DIR}/Vendor/DirectXShaderCompiler/bin/x64")

add_library(dxcompiler SHARED IMPORTED)

set_target_properties(dxcompiler PROPERTIES
    IMPORTED_IMPLIB "${DXC_LIB_DIR}/dxcompiler.lib"
    IMPORTED_LOCATION "${DXC_DLL_DIR}/dxcompiler.dll"
)

# set(DLL_COPY_COMMAND
# COMMAND ${CMAKE_COMMAND} -E copy
# "${DXC_DLL_DIR}/dxcompiler.dll"
# "$<TARGET_FILE_DIR:$<TARGET_PROPERTY:LINKED_TARGET>>"
# COMMAND ${CMAKE_COMMAND} -E copy
# "${DXC_DLL_DIR}/dxil.dll"
# "$<TARGET_FILE_DIR:$<TARGET_PROPERTY:LINKED_TARGET>>"
# )

set_target_properties(dxcompiler PROPERTIES
INTERFACE_POST_BUILD "${DLL_COPY_COMMAND}"
)

set(DXCOMPILER_TARGET dxcompiler CACHE INTERNAL "dxcompiler target")
